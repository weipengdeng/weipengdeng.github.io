{{ $newsAll := sort (where .Site.RegularPages "Section" "news") "Date" "desc" }}
{{ $limit := .Site.Params.home.newsLimit | default 12 }}
{{ $news := first $limit $newsAll }}
{{ $newsPage := .Site.GetPage "section" "news" }}

<section class="section">
  <div class="section__header">
    <h2 class="section__title">
      <span class="section__icon" aria-hidden="true">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
          <path d="M6 18a2 2 0 1 0 0.001 0Z" fill="currentColor"/>
          <path d="M4 4a16 16 0 0 1 16 16" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
          <path d="M4 11a9 9 0 0 1 9 9" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
        </svg>
      </span>
      <span>News</span>
    </h2>
    {{ if $newsPage }}<a class="section__more" href="{{ $newsPage.RelPermalink }}">view all Â»</a>{{ end }}
  </div>

  {{ if not (len $news) }}
    <div class="item__meta">Add dated Markdown files under <code>content/news/</code>.</div>
  {{ else }}
    <div class="news-scroll" role="list">
      {{ range $group := $news.GroupByDate "2006" }}
        <div class="news-year" role="listitem">
          <div class="news-year__key">{{ $group.Key }}</div>
          <div class="news-year__items">
            {{ range $item := $group.Pages }}
              <div class="news-line">
                <a class="news-line__title" href="{{ $item.RelPermalink }}">{{ $item.Title }}</a>
                <span class="news-line__date">{{ $item.Date.Format "Jan 02" }}</span>
              </div>
            {{ end }}
          </div>
        </div>
      {{ end }}
    </div>
  {{ end }}
</section>
