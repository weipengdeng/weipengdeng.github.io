{{ define "main" }}
  <article class="section">
    <h2 style="margin:0 0 0.35rem">{{ .Title }}</h2>
    {{ with .Params.authors }}
      <div class="item__meta">{{ delimit . ", " }}</div>
    {{ end }}
    {{ with .Params.venue }}
      <div class="item__meta">{{ . }}{{ with $.Params.year }} Â· {{ . }}{{ end }}</div>
    {{ end }}
    {{ with .Params.tags }}
      <div class="topic-row" style="margin:0.75rem 0 0.85rem" aria-label="Publication tags">
        {{ range . }}
          {{ partial "topic-badge.html" . }}
        {{ end }}
      </div>
    {{ end }}

    {{ $links := .Params.links }}
    {{ if $links }}
      <div class="pub-actions" style="margin-bottom:1rem">
        {{ with $links.pdf }}<a class="btn" href="{{ . }}" target="_blank" rel="noopener">PDF</a>{{ end }}
        {{ with $links.code }}<a class="btn" href="{{ . }}" target="_blank" rel="noopener">Code</a>{{ end }}
        {{ with $links.project }}<a class="btn" href="{{ . }}" target="_blank" rel="noopener">Project</a>{{ end }}
      </div>
    {{ end }}

    <div class="prose">{{ .Content }}</div>

    {{ $thumb := .Resources.GetMatch "*thumbnail*" }}
    {{ if $thumb }}
      {{ $img := $thumb.Fit "960x640 webp q85" }}
      <figure class="pub-hero">
        <img src="{{ $img.RelPermalink }}" alt="Thumbnail for {{ .Title }}" loading="lazy" decoding="async" />
      </figure>
    {{ end }}
  </article>
{{ end }}
